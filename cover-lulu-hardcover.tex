% Cover for Lulu.com
\input{opt-ustrade}

\documentclass[\OPTfontsize]{article}
\input{opt-color}

\usepackage[utf8]{inputenc}
\usepackage{rotating}
\usepackage{xcolor}
\usepackage{wallpaper}

\definecolor{covercolor}{cmyk}{\OPTcovercolor}
\definecolor{covertext}{cmyk}{\OPTcovertextcolor}
\pagecolor{covercolor}

\usepackage{soul} % Inter-letter spacing
\sodef\ugg{}{0pt plus 1fill}{1em plus 1fill}{0pt}

%%% Set the fonts
\usepackage{mathpazo}
\usepackage[scaled=0.95]{helvet}
\usepackage{courier}
\linespread{1.05} % Palatino looks better with this

\usepackage{graphicx}
\DeclareGraphicsExtensions{.png}
\input{bmpsize-hack} % for bounding boxes in dvi mode

% Some of these dimensions are reported by Lulu.com *after* you
% upload the inner PDF file.
% For casewrap hardcover see http://static.lulu.com/static/images/help_casewrap_6x9.gif

\newlength{\totalwidth}
\setlength{\totalwidth}{1094pt} % Reported as total cover width

\newlength{\totalheight}
\setlength{\totalheight}{774pt} % Reported as total cover height

\newlength{\spinewidth}
\setlength{\spinewidth}{104pt} % Reported as spine width

\newlength{\coverheight}
\setlength{\coverheight}{666pt} % Height of text area

\newlength{\coverwidth}
\setlength{\coverwidth}{441pt} % Width of text area

\usepackage[margin=0pt,
            papersize={\totalwidth,\totalheight},
            noheadfoot]{geometry}
%\usepackage{layout}
\newcommand{\coverpage}[1]{\vbox to \coverheight{\hbox to \coverwidth{#1}}}
\newcommand{\spine}[1]{\vbox to \coverheight{\hbox to \spinewidth{#1}}}

\parindent=0pt
\parskip=0pt

\input{frontpage}

\newcommand{\spinetext}{
\begin{minipage}[b][\coverheight][t]{\spinewidth}
\begin{center}
  \begin{rotate}{270}
    \color{covertext}
    \hspace{\OPTtopskip}
    \begin{minipage}{\coverheight}
      {\fontsize{\OPTcoverspinefont}{\OPTcoverspinefont}\fontseries{b}\selectfont%
        Homotopy Type Theory}
    \end{minipage}
  \end{rotate}
\end{center}
\end{minipage}
}

\newcommand{\backpage}{
\begin{minipage}[b][\coverheight][t]{\coverwidth}
\begin{center}
\begin{minipage}[t]{0.80\coverwidth}
  \color{covertext}
  \vspace{\OPTtopskip}
  \input{blurb.tex}
\end{minipage}
\end{center}
\end{minipage}
}

\begin{document}
%\layout
\LRCornerWallPaper{0.87}{cover-hires}
\begin{center}
  \vbox{}
  \vfill
  \mbox{\coverpage{\backpage}\spine{\spinetext}\coverpage{\frontpage}}
  \vfill
\end{center}
\end{document}
